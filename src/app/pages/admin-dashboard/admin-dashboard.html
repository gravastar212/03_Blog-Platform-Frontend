<div class="admin-dashboard">
  <div class="dashboard-header">
    <div class="container">
      <h1>
        <mat-icon>dashboard</mat-icon>
        Admin Dashboard
      </h1>
      <a mat-raised-button color="primary" routerLink="/admin/editor">
        <mat-icon>add_circle</mat-icon>
        Create New Post
      </a>
    </div>
  </div>

  <div class="container">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <mat-card class="stat-card">
        <mat-icon color="primary">article</mat-icon>
        <div class="stat-content">
          <h3>Total Posts</h3>
          <p class="stat-number">{{ stats().totalPosts }}</p>
        </div>
      </mat-card>

      <mat-card class="stat-card">
        <mat-icon color="primary">visibility</mat-icon>
        <div class="stat-content">
          <h3>Total Views</h3>
          <p class="stat-number">{{ stats().totalViews }}</p>
        </div>
      </mat-card>

      <mat-card class="stat-card">
        <mat-icon color="primary">favorite</mat-icon>
        <div class="stat-content">
          <h3>Total Likes</h3>
          <p class="stat-number">{{ stats().totalLikes }}</p>
        </div>
      </mat-card>

      <mat-card class="stat-card">
        <mat-icon color="primary">star</mat-icon>
        <div class="stat-content">
          <h3>Featured Posts</h3>
          <p class="stat-number">{{ stats().featuredPosts }}</p>
        </div>
      </mat-card>
    </div>

    <!-- Posts Table -->
    <mat-card class="posts-table-card">
      <mat-card-header>
        <mat-card-title>All Posts</mat-card-title>
        <mat-card-subtitle>Manage your blog posts</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="table-container">
          <table mat-table [dataSource]="posts()" class="posts-table">
            <!-- Title Column -->
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef>Title</th>
              <td mat-cell *matCellDef="let post">
                <div class="post-title-cell">
                  <strong>{{ post.title }}</strong>
                  @if (post.featured) {
                    <mat-chip class="featured-badge">Featured</mat-chip>
                  }
                </div>
              </td>
            </ng-container>

            <!-- Category Column -->
            <ng-container matColumnDef="category">
              <th mat-header-cell *matHeaderCellDef>Category</th>
              <td mat-cell *matCellDef="let post">
                <mat-chip>{{ post.category }}</mat-chip>
              </td>
            </ng-container>

            <!-- Date Column -->
            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Published</th>
              <td mat-cell *matCellDef="let post">
                {{ post.publishedDate | date: 'mediumDate' }}
              </td>
            </ng-container>

            <!-- Stats Column -->
            <ng-container matColumnDef="stats">
              <th mat-header-cell *matHeaderCellDef>Stats</th>
              <td mat-cell *matCellDef="let post">
                <div class="stats-cell">
                  <span><mat-icon>visibility</mat-icon> {{ post.views }}</span>
                  <span><mat-icon>favorite</mat-icon> {{ post.likes }}</span>
                </div>
              </td>
            </ng-container>

            <!-- Actions Column -->
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let post">
                <div class="actions-cell">
                  <a mat-icon-button [routerLink]="['/blog', post.id]" matTooltip="View">
                    <mat-icon>visibility</mat-icon>
                  </a>
                  <a mat-icon-button [routerLink]="['/admin/editor', post.id]" matTooltip="Edit" color="primary">
                    <mat-icon>edit</mat-icon>
                  </a>
                  <button mat-icon-button (click)="deletePost(post.id)" matTooltip="Delete" color="warn">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>

          @if (posts().length === 0) {
            <div class="empty-state">
              <mat-icon>article</mat-icon>
              <p>No posts yet. Create your first post!</p>
              <a mat-raised-button color="primary" routerLink="/admin/editor">
                <mat-icon>add</mat-icon>
                Create Post
              </a>
            </div>
          }
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
